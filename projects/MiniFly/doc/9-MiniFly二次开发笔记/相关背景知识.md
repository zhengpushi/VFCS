# 相关背景知识

## 0. 目录

* 术语
* 易混概念或常见问题

## 1. 术语

* ISO: International Organization for Standardization 国际标准化组织, 是制定全世界工商业国际标准的国际标准建立机构。
* IEC: International Electrotechnical Commission 国际电工委员会, 负责有关电气工程和电子工程领域中的国际标准化工作。
* ITU: International Telecommunication Union 国际电信联盟，主要负责确立国际无线电和电信的管理制度和标准。
* ISM频段: Industrial Scientific Medical Band, 主要开放给工业，科学和医学机构使用的频段。应用这些频段无须许可证或费用，只需要遵守一定的发射功率（一般低于1W），并且不要对其它频段造成干扰即可。ISM频段在各国的规定并不统一。如美国有三个频段 902~928 MHz、2400~2483.5 MHz、5725~5850 MHz。2.4GHz为各国共同的ISM频段。因此，无线局域网（IEEE 802.11b/IEEE 802.11g)、蓝牙、ZigBee等无线昂罗，均可工作在2.4GHz频段上。
* WLAN: Wireless LAN 无线局域网，不使用任何传输电缆连接的局域网。一般工作在2.4GHz或5GHz。
* Bluetooth: 蓝牙，一种无线通讯技术标准，用来让固定与移动设备，在短距离间交换资料，以形成个人局域网（PAN）。其使用短波特高频（UHF）无线电波，经由2.4至2.485 GHz的ISM频段来进行通信。为了避免干扰可能使用2.45GHz的其它协议，蓝牙协议将该频段划分成79个信道，（带宽为1MHz）每秒的信道转换可达1600次。
* WIFI：无线通信网络标准，也工作在ISM 2.4GHz公共频段
* 2.4G：一种短距离无线传输技术，双向传播，抗干扰性强，传输距离远，耗电少。2.4G是频段，不是2.4GHz。
* MCU：Microcontroller Unit 微控制单元，又称单片机

## 2. 易混概念或常见问题

* 蓝牙和WIFI的区别：

  蓝牙和WIFI都属于无线通信网络标准。它们的相同点是都工作在ISM2.4GHz公共频段。

  不同的地方是，蓝牙使用的是FHSS（跳频扩谱）方式，一般每秒钟跳变1600次，将83.5MHz的频带划分为79个频带信道，每个时刻只占1MHz的带宽。通信距离一般是10米，在今年4月份推出的最新的版本Bluetooth4.0传输距离可以达到50米。

  wifi所使用的协议时IEEE802.11b局域网协议，它的传输范围100米，速度最大可以达到11Mbps，使用的是DSSS(直序列扩频)和QPSK或BPSK(相移键控)，带宽是22MHz。

  蓝牙属于WPAN无线局域网，即点对点。而wifi属于WLAN无线局域网，多个终端同时传输的网路模式。

* 电磁波和无线电波的区别

  * 简要解释：

    * 电磁波包括无线电波和光波。因为无线电波分为12个波段，3Hz～3×1012 Hz，而光波的波长比无线电波的中微波波长还短，超出了无线电波的范畴，无线电波不包含光波。
    * 电磁波包括宇宙射线、X射线、紫外线、可见光、红外线（前面这些合称光波）和无线电波等。它们都各有不同的波长和振动频率。
    * 在整个电磁波范围内，并不是所有的光都有色彩，更确切地说，并不是所有的光的色彩我们肉眼都可以分辨。只有波长在 380纳米至 780纳米之间的电磁波才能引起人的色知觉。这段波长的电磁波叫可见光谱，或叫做可见光。其余波长的电磁波，都是肉眼所看不见的，通称不可见光。
    * 也就是说，无线电波是电磁波的一种，光波也是电磁波。电磁波与无线电波的关系就是电磁波包含无线电波。一个东西不同的波长罢啦。

  * 电磁波

    * 定义：电磁波(Electromagnetic wave)是由同相且互相垂直的电场与磁场在空间中衍生发射的振荡粒子波，是以波动的形式传播的电磁场，具有波粒二象性，其粒子形态称为光子，电磁波与光子不是非黑即白的关系，而是根据实际研究的不同，其性质所体现出的两个侧面。由同相振荡且互相垂直的电场与磁场在空间中以波的形式移动，其传播方向垂直于电场与磁场构成的平面。电磁波在真空中速率固定，速度为光速。
    * 补充说明
      * 电磁波伴随的电场方向，磁场方向，传播方向三者互相垂直，因此电磁波是横波。电磁波实际上分为电波和磁波，是二者的总称，但由于电场和磁场总是同时出现，同时消失，并相互转换，所以通常将二者合称为电磁波，有时可直接简称为电波。
      * 一定频率范围的电磁波可以被人眼所看见，称之为可见光，或简称为光，太阳光是电磁波的一种可见的辐射形态。电磁波不依靠介质传播。
      * 电磁辐射通常意义上指所有电磁辐射特性的电磁波，非电离辐射是指无线电波、微波、红外线、可见光、紫外线。而X射线及γ射线通常被认为是放射性的辐射。称作电离辐射。

  * 电磁波谱

    * 定义：按照波长或频率的顺序把这些电磁波排列起来，就是电磁波谱。如果把每个波段的频率由低至高依次排列的话，它们是工频电磁波、无线电波（分为长波、中波、短波、微波）、红外线、可见光、紫外线、X射线及γ射线。以无线电的波长最长，宇宙射线（x射线、γ射线和波长更短的射线）的波长最短。

    * 补充说明：无线电波用于通信等，微波用于微波炉，红外线用于遥控,热成像仪，红外制导导弹等，可见光是大部分生物用来观察事物的基础，紫外线用于医用消毒，验证假钞,测量距离，工程上的探伤等，X射线用于CT照相，伽玛射线用于治疗,使原子发生跃迁从而产生新的射线等。

  * 无线电波频

    * 在19世纪末，意大利人马可尼和俄国人波波夫同在1895年进行了无线电通信试验。在此后的100年间，从3KHz直到300GHz频谱被认识、开发和逐步利用。

    * 根据不同的传播特性，不同的使用业务，对整个无线电频谱进行划分，共分13段：至低频、极低频(ELF)、超低频(SLF)、特低频(ULF)、甚低频(VLF)、低频(LF)、中频(MF)，高频(HF)、甚高频(VHF)、特高频(UHF)、超高频(SHF)、极高频(EHF)和至高频，加上吉米波和忽米波，对应的波段从吉米波、至长波(百兆米波)、极长波(十兆米波)、超长波(兆米波)、特长波(十万米波)、甚长波(万米波)、长波(千米波)、中波(百米波)、短波(十米波)、甚短波(米波)、特短波(分米波)、超短波(厘米波)、极短波(毫米波)、至短波(丝米波)和忽米波(从分米波到毫米波的3种统称为微波)。

    * 频段（波段）名称及范围

      | 波段名称 | 频段名称                                                | 波段范围                                              | 频段范围                                                     |
      | -------- | ------------------------------------------------------- | ----------------------------------------------------- | ------------------------------------------------------------ |
      | 超长波   | 甚低频(VLF)                                             | $10^5\sim 10^4 m$                                     | $3\sim 30kHz$                                                |
      | 长波     | 低频(LF)                                                | $10^4\sim10^3m$                                       | $30\sim300kHz$                                               |
      | 中波     | 中频(MF)                                                | $10^3\sim10^2m$                                       | $300\sim3000kHz$                                             |
      | 短波     | 高频(HF)                                                | $10^2\sim10m$                                         | $3\sim~30MHz$                                                |
      | 超短波   | 甚高频(VHF)                                             | $10\sim1m$                                            | $30\sim300MHz$                                               |
      | 微波     | 特高频(UHF)<br>超高频(SHF)<br/>极高频(EHF)<br/>超级高频 | $100\sim10cm$<br>$10\sim1cm$<br>$10\sim1mm$<br>$<1mm$ | $300\sim3000MHz$<br>$3\sim30GHz$<br>$30\sim300GHz$<br>$>300GHz$ |

  * 电磁波与无线电波的不同

    * 侧重点不一样
      * 电磁波：由相同且互相垂直的电场与磁场在空间中衍生发射的震荡粒子波，侧重的是一种现象
      * 无线电：指在所有自由空间（包括空气和真空）传播的电磁波，侧重于技术。
    * 包含的电磁种类数目不一样
      * 电磁波：包含电磁种类较多，微波、红外线、可见光、紫外线等。
      * 无线电：包含电磁种类较少。

* 为什么单片机的代码在Flash中执行，而普通计算机却不能在硬盘中执行？

  可参考：[知乎上的一个讨论](https://www.zhihu.com/question/387640455)

  * Flash和硬盘的特性差异

    读取Flash，可以按字节、字来进行

    写入Flash，只能按块（页）来访问，比如1KB。

    读写硬盘，都只能按块（页）来访问。

  * 单片机

    由于代码的执行只需要按字读取Flash，不需要写入Flash，所以理论上可行。

    因为单片机的运行速度一般比较慢，Flash的读取速度足够跟上代码运行的速度。并不是说先读取Flash后运行代码，而是一边Flash读取一边CPU运行。

    单片机内部都会有Flash预读操作，相当于提前读取Flash代码放入缓存，CPU运行代码直接从缓存中读，从而加快单片机的运行速度。

    代码在Flash中运行，这样的好处是可以减少RAM的占用，减少生产的硬件成本。

  * 电脑

    CPU运行速度快，Flash读取速度跟不上。

  * 其他说明
    * 并非所有单片机都在Flash中运行代码，比如stm32H7、NXP的i.MX RT系列就是在RAM中运行。其内置Flash很小，用来执行出厂配置，用户很少用，代码放在外置的Flash中。一般需要OS或自己写机制来搬运数据。
    * 还有一种情况，用户可以自行拷贝代码到RAM中，并用函数指针去调用RAM中的注册函数。重点也是要自己维护数据。比较复杂的是要考虑链接阶段的段地址、符号表等如何定位，如何动态修补程序，需要熟悉硬件寻址的机制。

* Nor Flash和NAND Flash的区别

  * NOR Flash

    1988年intel公司开发出的技术，特点是芯片内执行（XIP，eXecute In Place）。其传输效率很高。在1~4MB的小容量时具有很高的成本收益。但其很低的写入和擦除速度影响了写入性能。

    NOR Flash的读取与常见SDRAM的读取类似，用户可直接运行装载在NOR Flash中的代码。

  * NAND Flash

    1989年东芝公司开发出的技术。容量大，改写速度快等优点，适用于大量数据的存储。

  * 区别

    * 价格：SRAM最贵，Nor Flash次之，NAND Flash最便宜。

    * 性能比较

      * 读取速度：NOR比NAND稍快。
      * 写入速度：NAND比NOR快很多
      * 擦除速度：NAND 4ms，NOR 5s
      * 擦除单元：NAND的更小。

    * 接口差异

      * NOR带有SRAM接口，有足够引脚来寻址，容易存取其内部的每一个字节。
      * NAND用复杂的IO口串行存取数据。NAND读写采用512字节的块。

    * 容量和成本

    * 可靠性和耐用性（寿命）

      * NAND的每个块最大擦写次数是一百万次，NOR的擦写次数是十万次。

      * 位比特反转：所有flash器件都受位交换现象的困扰。

        总的几率较小，相对的NAND的次数多于NOR。

        若用于多媒体信息则无所谓。

        若用于OS、配置文件、其他敏感信息，必须使用EDC/ECC（错误探测、错误更正）算法以确保可靠性。

* Flash和SSD的关系？

  * 相同点
    * 都采用闪存颗粒作为存储的主体，主控+闪存芯片这样的结构。
    * 基本运作原理相似，可以视为同一类产品的简化版和高配版
  * 不同点
    * 闪存通常的输出接口是USB，固态硬盘是SATA接口或其他接口，比如sata固态硬盘、msata固态硬盘、M.2固态硬盘等
    * 闪存通常是单闪存颗粒，偶尔有两个颗粒做双通道，固态硬盘是多颗粒，所以闪存通常容量不大，而固态硬盘可以以比较大的容量起步，比如256G固态硬盘。
    * 闪存的主控非常简单，通常只包含读写策略和缓存机制；而固态除了这两个以外，还要进行各个方面的优化，比如读写、策略、缓存、电气特性、垃圾回收机制等等
    * 闪存的体积较小，通常只有手指大小，便于携带，不怕摔；固态硬盘通常较大，不算硬盘盒，一个msata的固态都要大半张银行卡的大小，一些M.2和PCIe的还要长一些。
    * 性能上差异较大，普通的闪存产品，同一时间内，只能进行读或者写其中一项操作，因为闪存颗粒的电压变化收到主控的影响，通常只能有一种；固态硬盘主控更复杂，能够同时控制不同的电压变化，读和写几乎没有影响，可以同时进行。

* 